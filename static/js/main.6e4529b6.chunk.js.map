{"version":3,"sources":["state/StopwatchContext.js","components/Controls.jsx","utils/timeFormat.js","components/TimePanel.jsx","App.jsx","index.jsx"],"names":["StopwatchContext","createContext","playing$","BehaviorSubject","observable$","pipe","switchMap","playing","interval","NEVER","Controls","startStopRef","useRef","waitRef","resetRef","useContext","isEnabled","setIsEnabled","setSeconds","useEffect","stopwatchSubscription$","subscribe","seconds","startStopClick$","fromEvent","current","resetClick$","waitClick$","waitDoubleClick$","buffer","debounceTime","filter","clicks","length","startStopSubscription$","handleStartStop","resetSubscription$","handleReset","waitStopSubscription$","handleWait","unsubscribe","next","direction","spacing","colorScheme","variant","width","ref","label","openDelay","isDisabled","pad2digits","value","String","padStart","TimePanel","time","H","Math","floor","M","S","timeFormat","color","p","maxW","className","fontSize","App","useState","useMemo","Provider","mt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6e4529b6.chunk.js","sourcesContent":["import {createContext} from 'react';\n\nexport const StopwatchContext = createContext(null);\n","import {Button, HStack, Tooltip} from '@chakra-ui/react';\nimport {useContext, useEffect, useRef} from 'react';\nimport {StopwatchContext} from '../state/StopwatchContext';\nimport {BehaviorSubject, fromEvent, interval, NEVER} from 'rxjs';\nimport {switchMap, filter, buffer, debounceTime} from 'rxjs/operators';\n\nconst playing$ = new BehaviorSubject(false);\nconst observable$ = playing$.pipe(\n  switchMap((playing) => (playing ? interval(1000) : NEVER))\n);\n\nexport const Controls = () => {\n  const startStopRef = useRef(null);\n  const waitRef = useRef(null);\n  const resetRef = useRef(null);\n  const {isEnabled, setIsEnabled, setSeconds} = useContext(StopwatchContext);\n\n  useEffect(() => {\n    const stopwatchSubscription$ = observable$.subscribe(() => {\n      setSeconds((seconds) => seconds + 1);\n    });\n\n    const startStopClick$ = fromEvent(startStopRef.current, 'click');\n    const resetClick$ = fromEvent(resetRef.current, 'click');\n    const waitClick$ = fromEvent(waitRef.current, 'click');\n    const waitDoubleClick$ = waitClick$.pipe(\n      buffer(waitClick$.pipe(debounceTime(300))),\n      filter((clicks) => clicks.length === 2)\n    );\n\n    const startStopSubscription$ = startStopClick$.subscribe(handleStartStop);\n    const resetSubscription$ = resetClick$.subscribe(handleReset);\n    const waitStopSubscription$ = waitDoubleClick$.subscribe(handleWait);\n\n    return () => {\n      stopwatchSubscription$.unsubscribe();\n      startStopSubscription$.unsubscribe();\n      resetSubscription$.unsubscribe();\n      waitStopSubscription$.unsubscribe();\n    };\n  }, [isEnabled]);\n\n  const handleStartStop = () => {\n    if (isEnabled) {\n      setIsEnabled(false);\n      setSeconds(0);\n      playing$.next(false);\n    } else {\n      setIsEnabled(true);\n      playing$.next(true);\n    }\n  };\n\n  const handleWait = () => {\n    setIsEnabled(false);\n    playing$.next(false);\n  };\n\n  const handleReset = () => {\n    setSeconds(0);\n    playing$.next(false);\n    playing$.next(true);\n  };\n\n  return (\n    <HStack direction={['column', 'row']} spacing=\"16px\">\n      <Button\n        colorScheme={isEnabled ? 'red' : 'green'}\n        variant=\"solid\"\n        width={70}\n        ref={startStopRef}\n      >\n        {isEnabled ? 'Stop' : 'Start'}\n      </Button>\n\n      <Tooltip\n        label=\"Double click (less than 300ms between clicks)\"\n        openDelay={1000}\n      >\n        <Button\n          colorScheme=\"yellow\"\n          variant=\"outline\"\n          isDisabled={!isEnabled}\n          ref={waitRef}\n        >\n          Wait\n        </Button>\n      </Tooltip>\n\n      <Button\n        colorScheme=\"blue\"\n        variant=\"solid\"\n        isDisabled={!isEnabled}\n        ref={resetRef}\n      >\n        Reset\n      </Button>\n    </HStack>\n  );\n};\n","const pad2digits = (value) => String(value).padStart(2, '0');\n\nexport const timeFormat = (seconds) => {\n  const H = Math.floor(seconds / 3600);\n  const M = Math.floor((seconds - H * 3600) / 60);\n  const S = seconds % 60;\n  return `${pad2digits(H)}:${pad2digits(M)}:${pad2digits(S)}`;\n};\n","import {Box, Text} from '@chakra-ui/react';\nimport {useContext} from 'react';\nimport {StopwatchContext} from '../state/StopwatchContext';\nimport {timeFormat} from '../utils/timeFormat';\n\nexport const TimePanel = () => {\n  const {seconds} = useContext(StopwatchContext);\n  const time = timeFormat(seconds);\n  return (\n    <Box color=\"yellow.500\" p={2} maxW={250} className=\"time-panel\">\n      <Text fontSize=\"6xl\">{time}</Text>\n    </Box>\n  );\n};\n","import {Controls} from './components/Controls';\nimport {TimePanel} from './components/TimePanel';\nimport {VStack} from '@chakra-ui/react';\nimport {useMemo, useState} from 'react';\nimport {StopwatchContext} from './state/StopwatchContext';\n\nexport const App = () => {\n  const [seconds, setSeconds] = useState(0);\n  const [isEnabled, setIsEnabled] = useState(false);\n\n  const value = useMemo(\n    () => ({seconds, setSeconds, isEnabled, setIsEnabled}),\n    [seconds, isEnabled]\n  );\n\n  return (\n    <StopwatchContext.Provider value={value}>\n      <VStack mt={16} spacing=\"24px\">\n        <TimePanel />\n        <Controls />\n      </VStack>\n    </StopwatchContext.Provider>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {ChakraProvider} from '@chakra-ui/react';\nimport {App} from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider>\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}